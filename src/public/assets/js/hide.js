function setupDropdown(dropdownId,selectedItemsId,otherDropdownId,otherSelectedId,hiddenInputId){const dropdown=document.getElementById(dropdownId);const selectedItems=document.getElementById(selectedItemsId);const otherDropdown=document.getElementById(otherDropdownId);const otherSelectedItems=document.getElementById(otherSelectedId);const hiddenInput=document.getElementById(hiddenInputId);let hiddenCities=new Set();selectedItems.addEventListener('click',(event)=>{event.stopPropagation();dropdown.style.display=dropdown.style.display==='block'?'none':'block'});document.addEventListener('click',(event)=>{if(!selectedItems.contains(event.target)&&!dropdown.contains(event.target)){dropdown.style.display='none'}});dropdown.querySelectorAll('.has-submenu').forEach(city=>{city.addEventListener('click',function(event){event.stopPropagation();const submenu=city.querySelector('.submenu');if(submenu){submenu.style.display=submenu.style.display==='block'?'none':'block'}})});dropdown.querySelectorAll('.submenu div[data-value]').forEach(station=>{station.addEventListener('click',function(event){event.stopPropagation();const stationValue=station.dataset.value;const parentCity=station.closest('.has-submenu');console.log(parentCity);if(!parentCity)return;const cityValue=parentCity.dataset.value;if(hiddenCities.has(cityValue)){const previouslyHiddenCity=otherDropdown.querySelector(`.has-submenu[data-value="${cityValue}"]`);if(previouslyHiddenCity){previouslyHiddenCity.style.display='block'}}
const cityToHide=otherDropdown.querySelector(`.has-submenu[data-value="${cityValue}"]`);if(cityToHide){cityToHide.style.display='none';hiddenCities.add(cityValue)}
selectedItems.innerHTML="";const span=document.createElement('span');span.textContent=station.textContent;span.dataset.value=stationValue;span.addEventListener('click',function(){removeItem(selectedItems,otherDropdown,cityValue)});selectedItems.appendChild(span);hiddenInput.value=stationValue;dropdown.style.display='none'})});function removeItem(selectedItems,otherDropdown,cityValue){const cityToRestore=otherDropdown.querySelector(`.has-submenu[data-value="${cityValue}"]`);if(cityToRestore){cityToRestore.style.display='block';hiddenCities.delete(cityValue)}
selectedItems.innerHTML="اضغط للاختيار...";hiddenInput.value=""}}
setupDropdown("dropdownList1","selectedItems1","dropdownList2","selectedItems2","firstChoiceInput");setupDropdown("dropdownList2","selectedItems2","dropdownList1","selectedItems1","secondChoiceInput")